---
import MainLayout from '../layouts/MainLayout.astro';
import Hero from '../components/Hero.vue';
import About from '../components/About.vue';
import Projects from '../components/Projects.vue';
import Blog from '../components/Blog.vue';
import Footer from '../components/Footer.vue';
import { getCollection, getEntry } from 'astro:content';

const posts = await getCollection('blog');
const enSite = await getEntry('site', 'en');
const esSite = await getEntry('site', 'es');

if (!enSite || !esSite) {
  throw new Error("Site data not found");
}

const siteData = {
  en: enSite.data,
  es: esSite.data
};
---

<MainLayout title="Omar Montoya | Solutions Architect">
	<Hero client:load siteData={siteData} />
	<About client:visible siteData={siteData} />
	<Projects client:visible siteData={siteData} />
	<Blog client:visible posts={posts} siteData={siteData} />
	<Footer client:visible siteData={siteData} />
</MainLayout>

