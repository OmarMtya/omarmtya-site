---
import MainLayout from '../layouts/MainLayout.astro';
import Hero from '../components/Hero.vue';
import About from '../components/About.vue';
import Projects from '../components/Projects.vue';
import Blog from '../components/Blog.vue';
import Footer from '../components/Footer.vue';
import { getCollection, getEntry } from 'astro:content';

const posts = await getCollection('blog');
const enSite = await getEntry('site', 'en');
const esSite = await getEntry('site', 'es');

if (!enSite || !esSite) {
  throw new Error("Site data not found");
}

const siteData = {
  en: enSite.data,
  es: esSite.data
};

// Schema.org data para la homepage
const siteUrl = Astro.site || 'https://omarmtya.com';
const schemaData = {
  name: "Omar Montoya",
  description: "Solutions Architect & Full-Stack Developer. Building custom software solutions powered by AI, from enterprise automation to scalable backends.",
  url: siteUrl.toString(),
  logo: new URL('/logo.svg', siteUrl).href,
  author: {
    name: "Omar Montoya",
    jobTitle: "Solutions Architect & Software Developer",
    url: siteUrl.toString()
  }
};
---

<MainLayout 
  title="Omar Montoya | Solutions Architect & Full-Stack Developer"
  description="Solutions Architect & Full-Stack Developer specializing in AI-powered development, enterprise automation, and scalable backends. Custom software solutions with Angular, Vue, NestJS, and n8n."
  lang="en"
  type="website"
  schemaData={schemaData}
>
	<Hero client:load siteData={siteData} />
	<About client:visible siteData={siteData} />
	<Projects client:visible siteData={siteData} />
	<Blog client:visible posts={posts} siteData={siteData} />
	<Footer client:visible siteData={siteData} />
</MainLayout>

