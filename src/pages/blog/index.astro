---
import BlogLayout from '../../layouts/BlogLayout.astro';
import { getCollection } from 'astro:content';
import BlogListLight from '../../components/BlogListLight.vue';

const POSTS_PER_PAGE = 1;

// Get current page from URL params
const currentPage = Number(Astro.url.searchParams.get('page') || '1');

// Get all blog posts
const allPosts = await getCollection('blog');
---

<BlogLayout 
  title="Blog | Omar Montoya - Tech Articles & Insights"
  description="Articles about software development, AI, automation, and solutions architecture. Tips, tutorials, and insights from a full-stack developer."
  lang="en"
  type="website"
>
  <BlogListLight client:load posts={allPosts} currentPage={currentPage} postsPerPage={POSTS_PER_PAGE} />
</BlogLayout>
