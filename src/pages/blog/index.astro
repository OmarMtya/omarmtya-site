---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import BlogList from '../../components/BlogList.vue';

const POSTS_PER_PAGE = 9;

// Get current page from URL params
const currentPage = Number(Astro.url.searchParams.get('page') || '1');

// Get all blog posts
const allPosts = await getCollection('blog');
---

<MainLayout 
  title="Blog | Omar Montoya - Tech Articles & Insights"
  description="Articles about software development, AI, automation, and solutions architecture. Tips, tutorials, and insights from a full-stack developer."
  lang="en"
  type="website"
>
  <BlogList client:load posts={allPosts} currentPage={currentPage} postsPerPage={POSTS_PER_PAGE} />
</MainLayout>
